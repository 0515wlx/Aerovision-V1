# Aerovision-V1 统一训练参数配置文件
# 用于检测模型的训练参数统一管理

# ==================== 数据路径配置 ====================
paths:
  # 原始数据路径
  data_root: "data"
  raw_images: "data/labeled"
  labels_csv: "data/labels.csv"
  registration_labels: "data"

  # 处理后的数据路径
  processed_root: "data/processed"
  detection: "data/processed/detection"

  # 训练数据路径
  train_data: "data/processed/detection/train"
  val_data: "data/processed/detection/val"
  test_data: "data/processed/detection/test"

  # 标签文件路径
  labels_dir: "data/processed/labels"

  # 模型路径
  model_root: "model"
  pretrained_models: "."
  checkpoints_root: "training/checkpoints"

  # 日志路径
  logs_root: "logs"

# ==================== 数据集划分配置 ====================
dataset:
  # 数据集划分比例
  train_ratio: 0.7
  val_ratio: 0.15
  test_ratio: 0.15

  # 随机种子
  random_seed: 42

  # 最小样本数（每个类别）
  min_samples_per_class: 1

# ==================== 检测模型配置 ====================
detection:
  # 模型配置
  model_size: "x"  # n, s, m, l, x - 推荐使用 x (YOLOv8x)
  task: "detect"
  data_yaml: "data/processed/detection/dataset.yaml"

  # 训练参数
  epochs: 50
  batch_size: 8
  imgsz: 640
  patience: 30

  # 优化器配置
  optimizer: "AdamW"
  lr0: 0.01
  lrf: 0.01
  momentum: 0.937
  weight_decay: 0.0005

  # 学习率调度
  warmup_epochs: 3.0
  warmup_momentum: 0.8
  warmup_bias_lr: 0.1

  # 数据增强
  hsv_h: 0.01
  hsv_s: 0.3
  hsv_v: 0.3
  degrees: 5
  translate: 0.1
  scale: 0.2
  fliplr: 0.0
  flipud: 0.0
  mosaic: 0.5
  mixup: 0.0

  # 训练设置
  device: "cpu"  # "0" for GPU 0, "cpu" for CPU
  workers: 8
  amp: true
  pretrained: true
  seed: 42

  # 验证和测试
  val: true
  plots: true
  save_period: 10
  conf: 0.25
  iou: 0.45

  # 保存设置
  project: "training/checkpoints"
  name: "registration_detection"
  exist_ok: true
  save: true

# ==================== OCR 配置 ====================
ocr:
  # OCR引擎
  engine: "paddleocr"

  # PaddleOCR配置
  use_angle_cls: true
  lang: "en"

  # 检测模型
  det_model_dir: null
  det_limit_side_len: 960
  det_box_thresh: 0.6
  det_unclip_ratio: 1.5

  # 识别模型
  rec_model_dir: null
  rec_char_dict_file: null
  rec_batch_num: 6

  # 方向分类器
  cls_model_dir: null
  cls_batch_num: 6
  cls_thresh: 0.9

# ==================== 质量评估配置 ====================
quality:
  # 清晰度阈值
  clarity_threshold: 0.7

  # 遮挡阈值
  block_threshold: 0.5

  # 质量过滤
  filter_low_quality: false
  min_clarity: 0.5
  max_block: 0.8

# ==================== 日志配置 ====================
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  save_to_file: true

  # TensorBoard
  tensorboard: true

# ==================== 其他配置 ====================
misc:
  # 随机种子（全局）
  seed: 42

  # 确定性训练
  deterministic: true

  # 混合精度训练
  amp: true

  # 缓存
  cache: false

  # 设备
  device: "cpu"  # "0" for GPU 0, "cpu" for CPU
