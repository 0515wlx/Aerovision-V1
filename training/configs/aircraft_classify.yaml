# YOLOv8 Aircraft Classification Configuration
# 飞机机型分类训练配置文件 - Stage 2
# 使用 YOLOv8x-cls 作为基座模型

# 模型配置
model: yolov8x-cls.pt  # YOLOv8x 分类模型 (最大版本)

# 数据集配置
data: training/data/processed/aircraft_crop  # 数据集根目录
train: train                                  # 训练集目录（相对于data）
val_dir: val                                  # 验证集目录（相对于data）
test: test                                    # 测试集目录（相对于data）

# 类别配置
nc: 100                         # 类别数量（根据实际数据集调整）
names:                          # 类别名称映射
  0: A320
  1: B737-800
  2: B777-300ER
  3: A330-300
  4: B787-9
  # ... 更多类别将由prepare_dataset.py脚本自动生成

# 训练参数
epochs: 30                      # 训练轮数
batch_size: 32                  # 批次大小
imgsz: 224                      # 输入图像尺寸
patience: 10                    # 早停耐心值
save: True                      # 保存检查点
device: 0                       # 设备 (0=GPU, cpu=CPU)
workers: 8                      # 数据加载线程数
project: runs/classify          # 项目名称
name: aircraft_classifier       # 实验名称
exist_ok: True                  # 允许覆盖已存在目录
pretrained: True                # 使用预训练权重

# 优化器配置
optimizer: AdamW                # 优化器 (SGD, Adam, AdamW)
lr0: 0.001                      # 初始学习率
lrf: 0.01                       # 最终学习率因子 (final_lr = lr0 * lrf)
momentum: 0.937                 # SGD动量
weight_decay: 0.0005            # 权重衰减

# 学习率调度
warmup_epochs: 3                # 预热轮数
warmup_momentum: 0.8            # 预热动量
warmup_bias_lr: 0.1             # 预热偏置学习率
cos_lr: False                   # 余弦退火学习率

# 数据增强
close_mosaic: 0                 # 关闭mosaic增强的轮数
fraction: 1.0                   # 使用数据集的比例
multi_scale: False              # 多尺度训练
rect: False                     # 矩形训练
single_cls: False               # 单类别训练
hsv_h: 0.015                    # HSV色调增强
hsv_s: 0.7                      # HSV饱和度增强
hsv_v: 0.4                      # HSV明度增强
degrees: 0.0                    # 旋转角度
translate: 0.1                  # 平移
scale: 0.5                      # 缩放
shear: 0.0                      # 剪切
perspective: 0.0                # 透视变换
flipud: 0.0                     # 上下翻转概率
fliplr: 0.5                     # 左右翻转概率
mosaic: 0.0                     # Mosaic增强概率
mixup: 0.0                      # Mixup增强概率

# 模型配置
amp: True                       # 自动混合精度训练
profile: False                  # 性能分析
freeze: None                    # 冻结层
dropout: 0.0                    # Dropout率

# 验证和测试
plots: True                     # 生成训练图表
save_json: False                # 保存JSON结果
save_hybrid: False              # 保存混合标签
conf: None                      # 置信度阈值
iou: 0.7                        # IoU阈值
max_det: 300                    # 最大检测数
half: False                     # 半精度推理
dnn: False                      # 使用OpenCV DNN
vid_stride: 1                   # 视频帧步长

# 保存和日志配置
save_period: 10                 # 每N轮保存一次
cache: False                    # 缓存图像
do_val: True                    # 是否进行验证
verbose: True                   # 详细输出

# TensorBoard配置
tensorboard: True               # 启用TensorBoard日志

# 检查点路径
checkpoint_dir: training/checkpoints/stage2
best_model: training/checkpoints/stage2/best.pt
last_model: training/checkpoints/stage2/last.pt

# 日志路径
log_dir: training/logs
